import{G as F,F as t,r as n,s as g,j as e,S as I,A as S,R as w,I as c,b,B as j,V as m}from"./index-BB15lXWh.js";import{g as C,u as L}from"./userService-CJhYqIYS.js";function U(r){return F({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(r)}const{Option:x}=b,D=()=>{var u,f;const[r]=t.useForm(),[l,o]=n.useState(!1),[h,d]=n.useState(!1),[s,N]=n.useState(null);n.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const a=await C();a.success&&a.data?(N(a.data),r.setFieldsValue(a.data)):g.error(a.message||"Failed to fetch profile data")}catch(a){console.error("Error fetching profile:",a),g.error(a.message||"Error loading profile")}finally{d(!1)}},v=()=>o(!0),y=()=>{o(!1),s&&r.setFieldsValue(s)},E=async a=>{try{d(!0);const i=await L({_id:(s==null?void 0:s._id)||"",...a});i.success?(m.success("Profile updated successfully"),o(!1),p()):m.error(i.message||"Failed to update profile")}catch(i){console.error("Profile update error:",i),m.error(i.message||"Failed to update profile")}finally{d(!1)}};return h&&!s?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(I,{size:"large",tip:"Loading profile..."})}):e.jsxs("div",{className:"md:p-4 p-0",children:[e.jsx("div",{className:"w-full h-[124px] bg-gradient-to-r from-green-50 to-green-100 rounded-md"}),e.jsxs("div",{className:"flex w-[80%] mx-auto items-center mb-6 mt-[-40px]",children:[e.jsx(S,{size:100,className:"border-4 border-white shadow-lg bg-blue-100 mr-4",icon:e.jsx(w,{className:"text-blue-500"}),children:(f=(u=s==null?void 0:s.firstName)==null?void 0:u[0])==null?void 0:f.toUpperCase()}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:"text-xl font-semibold text-[#344054]",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsx("p",{className:"text-[#667085]",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"p-5 pt-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{children:e.jsx("h4",{className:"font-semibold mb-1 text-[#344054] text-lg",children:"Profile Information"})}),!l&&e.jsxs("button",{onClick:v,className:"text-[#667085] flex items-center bg-[#E5E9F0] rounded-sm font-medium px-4 py-2 cursor-pointer hover:bg-[#D1D5DB] transition-colors",children:[e.jsx(U,{className:"text-[#667085] mr-2"})," Edit Profile"]})]}),e.jsx("div",{className:"mt-6 border-t border-[#E5E9F0] py-7",children:e.jsxs(t,{form:r,layout:"vertical",onFinish:E,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-5 gap-y-6 mb-9",children:[e.jsx(t.Item,{label:"First Name",name:"firstName",rules:[{required:!0}],children:e.jsx(c,{placeholder:"First name",className:"!h-[42px]",disabled:!l})}),e.jsx(t.Item,{label:"Last Name",name:"lastName",rules:[{required:!0}],children:e.jsx(c,{placeholder:"Last name",className:"!h-[42px]",disabled:!l})}),e.jsx(t.Item,{label:"Email",name:"email",children:e.jsx(c,{disabled:!0,className:"!h-[42px]",suffix:e.jsx("span",{className:"text-orange-500 text-xs",children:"Cannot be changed"})})}),e.jsx(t.Item,{label:"Phone Number",name:"phoneNumber",rules:[{required:!0}],children:e.jsx(c,{placeholder:"Phone number",className:"!h-[42px]",disabled:!l})}),e.jsx(t.Item,{label:"Gender",name:"gender",children:e.jsxs(b,{placeholder:"Select gender",className:"!h-[42px]",disabled:!l,children:[e.jsx(x,{value:"male",children:"Male"}),e.jsx(x,{value:"female",children:"Female"}),e.jsx(x,{value:"other",children:"Other"})]})})]}),l&&e.jsxs("div",{className:"border-t border-gray-200 py-7 flex justify-end gap-3",children:[e.jsx(j,{onClick:y,className:"h-[46px] px-10",children:"Cancel"}),e.jsx(j,{type:"primary",htmlType:"submit",loading:h,className:"h-[46px] px-10 bg-[#FF6C2D] hover:bg-orange-700",children:"Save changes"})]})]})})]})]})};export{D as default};
